
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>ä¸­åˆåƒä»€ä¹ˆï¼Ÿè½¬ç›˜</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 40px;
    }
    canvas {
      border: 4px solid #444;
      border-radius: 50%;
    }
    button {
      font-size: 18px;
      padding: 10px 20px;
      margin-top: 20px;
    }
    h2 {
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <h1>ğŸ¡ ä¸­åˆåƒä»€ä¹ˆï¼Ÿ</h1>
  <canvas id="wheel" width="500" height="500"></canvas>
  <br>
  <button onclick="spinWheel()">è½¬èµ·æ¥ï¼</button>
  <h2 id="result"></h2>

  <script>
    const restaurants = [
      "é‡‘æŒå‹º", "é¦™æ²³è‚‰é¥¼", "ç‚¼ç‚¼æœ‰æ„æ€", "æ»‡å¤§æ± ", "å®¢å“ªå‘¢", "æ¤’çˆ±", "æ¾é¹¤æ¥¼",
      "æµ·åº•æ", "è´¹å¤§å¨", "å°æ¸åºœ", "å¾ˆä¹…ä»¥å‰", "äºšæƒ ", "è¥¿è´", "å—æ˜Œæ‹Œç²‰",
      "å…¨ç‰›åŒ ", "èˆ¹æ­Œæ°´é¥º", "æ¾œæµ·é‚‘", "å·æˆå…ƒ", "æ¸©é‡èœ", "å¹½æ¹˜è°·", "çƒ¤åŒ ",
      "å¤ºå¤ºç²‰", "å·ç™¾æ±‡", "çœ‰å·ä¸œå¡", "æ±¤åŸå°å¨", "ç±³æ‘", "å°æ»¡ç²‰", "å–œå®¶å¾·",
      "ç‚¹å¯", "ç ‚é”…ç²¥", "é†‰é¢", "æ—¥æ˜Œ", "å’Œåºœ", "é˜¿å©†æ˜¥é¥¼", "é©¬æ°ç‰›è‚‰é¢",
      "è¢è®°äº‘é¥º", "æè®°ç‰›ç¾Šè‚‰", "ç¾Šå¤§ç¦", "å“ˆåˆ©ç‰›è‚‰é¢", "æ»¨å®¶çƒ¤é±¼",
      "å¼ äº®éº»è¾£çƒ«", "ç›ˆç¦", "æ’’æ‹‰èŠ±å„¿"
    ];

    const canvas = document.getElementById("wheel");
    const ctx = canvas.getContext("2d");
    const center = canvas.width / 2;
    const radius = center - 10;
    const anglePerSection = 2 * Math.PI / restaurants.length;
    let currentAngle = 0;
    let spinning = false;

    function drawWheel() {
      for (let i = 0; i < restaurants.length; i++) {
        const startAngle = currentAngle + i * anglePerSection;
        const endAngle = startAngle + anglePerSection;
        ctx.beginPath();
        ctx.moveTo(center, center);
        ctx.arc(center, center, radius, startAngle, endAngle);
        ctx.fillStyle = randomColor(i);
        ctx.fill();
        ctx.stroke();

        // æ–‡æœ¬
        const textAngle = startAngle + anglePerSection / 2;
        const x = center + (radius - 50) * Math.cos(textAngle);
        const y = center + (radius - 50) * Math.sin(textAngle);
        ctx.save();
        ctx.translate(x, y);
        ctx.rotate(textAngle);
        ctx.textAlign = "center";
        ctx.fillStyle = "black";
        ctx.font = "14px Arial";
        ctx.fillText(restaurants[i], 0, 0);
        ctx.restore();
      }

      // æŒ‡é’ˆ
      ctx.beginPath();
      ctx.moveTo(center - 10, center - radius + 10);
      ctx.lineTo(center, center - radius - 10);
      ctx.lineTo(center + 10, center - radius + 10);
      ctx.fillStyle = "red";
      ctx.fill();
    }

    function randomColor(i) {
      const hue = (i * 360 / restaurants.length) % 360;
      return `hsl(${hue}, 70%, 70%)`;
    }

    function spinWheel() {
      if (spinning) return;
      spinning = true;

      let totalRotation = Math.random() * 3600 + 1800; // 1800~5400åº¦
      let currentRotation = 0;
      let speed = 20;

      function animate() {
        currentRotation += speed;
        if (currentRotation >= totalRotation) {
          spinning = false;
          currentAngle += (totalRotation * Math.PI / 180);
          currentAngle %= 2 * Math.PI;
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          drawWheel();

          const index = restaurants.length - Math.floor((currentAngle % (2 * Math.PI)) / anglePerSection) - 1;
          const result = restaurants[(index + restaurants.length) % restaurants.length];
          document.getElementById("result").innerText = `ğŸ¯ ä»Šå¤©åƒï¼š${result}`;
          return;
        }

        currentAngle += (speed * Math.PI / 180);
        currentAngle %= 2 * Math.PI;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawWheel();
        speed *= 0.98;
        requestAnimationFrame(animate);
      }

      animate();
    }

    drawWheel();
  </script>
</body>
</html>
